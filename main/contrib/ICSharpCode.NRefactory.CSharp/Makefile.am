	
ASSEMBLY = $(top_builddir)/build/bin/ICSharpCode.NRefactory.CSharp.dll
  

REFS =  \
	-r:../../build/bin/ICSharpCode.NRefactory.dll \
	-r:System \
	-r:System.Core \
	-r:System.Xml \
	-r:System.Xml.Linq
	
SIGNING_KEY=$(srcdir)/../ICSharpCode.NRefactory/ICSharpCode.NRefactory.snk

FILES =  \
	Analysis/ControlFlow.cs \
	Analysis/DefiniteAssignmentAnalysis.cs \
	Analysis/ReachabilityAnalysis.cs \
	Ast/AstNode.cs \
	Ast/AstNodeCollection.cs \
	Ast/AstType.cs \
	Ast/CompilationUnit.cs \
	Ast/ComposedType.cs \
	Ast/CSharpModifierToken.cs \
	Ast/CSharpTokenNode.cs \
	Ast/CSharpUtil.cs \
	Ast/DepthFirstAstVisitor.cs \
	Ast/DocumentationReference.cs \
	Ast/ErrorNode.cs \
	Ast/Expressions/AnonymousMethodExpression.cs \
	Ast/Expressions/AnonymousTypeCreateExpression.cs \
	Ast/Expressions/ArrayCreateExpression.cs \
	Ast/Expressions/ArrayInitializerExpression.cs \
	Ast/Expressions/AsExpression.cs \
	Ast/Expressions/AssignmentExpression.cs \
	Ast/Expressions/BaseReferenceExpression.cs \
	Ast/Expressions/BinaryOperatorExpression.cs \
	Ast/Expressions/CastExpression.cs \
	Ast/Expressions/CheckedExpression.cs \
	Ast/Expressions/ConditionalExpression.cs \
	Ast/Expressions/DefaultValueExpression.cs \
	Ast/Expressions/DirectionExpression.cs \
	Ast/Expressions/EmptyExpression.cs \
	Ast/Expressions/ErrorExpression.cs \
	Ast/Expressions/Expression.cs \
	Ast/Expressions/IdentifierExpression.cs \
	Ast/Expressions/IndexerExpression.cs \
	Ast/Expressions/InvocationExpression.cs \
	Ast/Expressions/IsExpression.cs \
	Ast/Expressions/LambdaExpression.cs \
	Ast/Expressions/MemberReferenceExpression.cs \
	Ast/Expressions/NamedArgumentExpression.cs \
	Ast/Expressions/NamedExpression.cs \
	Ast/Expressions/NullReferenceExpression.cs \
	Ast/Expressions/ObjectCreateExpression.cs \
	Ast/Expressions/ParenthesizedExpression.cs \
	Ast/Expressions/PointerReferenceExpression.cs \
	Ast/Expressions/PrimitiveExpression.cs \
	Ast/Expressions/QueryExpression.cs \
	Ast/Expressions/SizeOfExpression.cs \
	Ast/Expressions/StackAllocExpression.cs \
	Ast/Expressions/ThisReferenceExpression.cs \
	Ast/Expressions/TypeOfExpression.cs \
	Ast/Expressions/TypeReferenceExpression.cs \
	Ast/Expressions/UnaryOperatorExpression.cs \
	Ast/Expressions/UncheckedExpression.cs \
	Ast/Expressions/UndocumentedExpression.cs \
	Ast/GeneralScope/Attribute.cs \
	Ast/GeneralScope/AttributeSection.cs \
	Ast/GeneralScope/Comment.cs \
	Ast/GeneralScope/Constraint.cs \
	Ast/GeneralScope/DelegateDeclaration.cs \
	Ast/GeneralScope/ExternAliasDeclaration.cs \
	Ast/GeneralScope/NamespaceDeclaration.cs \
	Ast/GeneralScope/NewLineNode.cs \
	Ast/GeneralScope/PreProcessorDirective.cs \
	Ast/GeneralScope/TextNode.cs \
	Ast/GeneralScope/TypeDeclaration.cs \
	Ast/GeneralScope/TypeParameterDeclaration.cs \
	Ast/GeneralScope/UsingAliasDeclaration.cs \
	Ast/GeneralScope/UsingDeclaration.cs \
	Ast/GeneralScope/WhitespaceNode.cs \
	Ast/IAstVisitor.cs \
	Ast/Identifier.cs \
	Ast/IdentifierExpressionBackreference.cs \
	Ast/MemberType.cs \
	Ast/Modifiers.cs \
	Ast/NodeType.cs \
	Ast/ObservableAstVisitor.cs \
	Ast/PrimitiveType.cs \
	Ast/Roles.cs \
	Ast/SimpleType.cs \
	Ast/Statements/BlockStatement.cs \
	Ast/Statements/BreakStatement.cs \
	Ast/Statements/CheckedStatement.cs \
	Ast/Statements/ContinueStatement.cs \
	Ast/Statements/DoWhileStatement.cs \
	Ast/Statements/EmptyStatement.cs \
	Ast/Statements/ExpressionStatement.cs \
	Ast/Statements/FixedStatement.cs \
	Ast/Statements/ForeachStatement.cs \
	Ast/Statements/ForStatement.cs \
	Ast/Statements/GotoStatement.cs \
	Ast/Statements/IfElseStatement.cs \
	Ast/Statements/LabelStatement.cs \
	Ast/Statements/LockStatement.cs \
	Ast/Statements/ReturnStatement.cs \
	Ast/Statements/Statement.cs \
	Ast/Statements/SwitchStatement.cs \
	Ast/Statements/ThrowStatement.cs \
	Ast/Statements/TryCatchStatement.cs \
	Ast/Statements/UncheckedStatement.cs \
	Ast/Statements/UnsafeStatement.cs \
	Ast/Statements/UsingStatement.cs \
	Ast/Statements/VariableDeclarationStatement.cs \
	Ast/Statements/WhileStatement.cs \
	Ast/Statements/YieldBreakStatement.cs \
	Ast/Statements/YieldReturnStatement.cs \
	Ast/TokenRole.cs \
	Ast/TypeMembers/Accessor.cs \
	Ast/TypeMembers/ConstructorDeclaration.cs \
	Ast/TypeMembers/DestructorDeclaration.cs \
	Ast/TypeMembers/EntityDeclaration.cs \
	Ast/TypeMembers/EnumMemberDeclaration.cs \
	Ast/TypeMembers/EventDeclaration.cs \
	Ast/TypeMembers/FieldDeclaration.cs \
	Ast/TypeMembers/FixedFieldDeclaration.cs \
	Ast/TypeMembers/FixedVariableInitializer.cs \
	Ast/TypeMembers/IndexerDeclaration.cs \
	Ast/TypeMembers/MethodDeclaration.cs \
	Ast/TypeMembers/OperatorDeclaration.cs \
	Ast/TypeMembers/ParameterDeclaration.cs \
	Ast/TypeMembers/PropertyDeclaration.cs \
	Ast/TypeMembers/VariableInitializer.cs \
	Completion/CompletionDataWrapper.cs \
	Completion/CSharpCompletionEngine.cs \
	Completion/CSharpCompletionEngineBase.cs \
	Completion/CSharpParameterCompletionEngine.cs \
	Completion/ICompletionDataFactory.cs \
	Completion/IMemberProvider.cs \
	Completion/IParameterCompletionDataFactory.cs \
	CSharpProjectContent.cs \
	Formatter/AstFormattingVisitor.cs \
	Formatter/CSharpFormattingOptions.cs \
	Formatter/GeneratedCodeSettings.cs \
	Formatter/Indent.cs \
	Formatter/TextEditorOptions.cs \
	OutputVisitor/CodeDomConvertVisitor.cs \
	OutputVisitor/CSharpAmbience.cs \
	OutputVisitor/CSharpOutputVisitor.cs \
	OutputVisitor/InsertParenthesesVisitor.cs \
	OutputVisitor/IOutputFormatter.cs \
	OutputVisitor/TextWriterOutputFormatter.cs \
	Parser/CSharpParser.cs \
	Parser/mcs/anonymous.cs \
	Parser/mcs/argument.cs \
	Parser/mcs/assembly.cs \
	Parser/mcs/assign.cs \
	Parser/mcs/async.cs \
	Parser/mcs/attribute.cs \
	Parser/mcs/cfold.cs \
	Parser/mcs/class.cs \
	Parser/mcs/codegen.cs \
	Parser/mcs/complete.cs \
	Parser/mcs/const.cs \
	Parser/mcs/constant.cs \
	Parser/mcs/context.cs \
	Parser/mcs/convert.cs \
	Parser/mcs/CryptoConvert.cs \
	Parser/mcs/cs-parser.cs \
	Parser/mcs/cs-tokenizer.cs \
	Parser/mcs/decl.cs \
	Parser/mcs/delegate.cs \
	Parser/mcs/doc.cs \
	Parser/mcs/driver.cs \
	Parser/mcs/dynamic.cs \
	Parser/mcs/ecore.cs \
	Parser/mcs/enum.cs \
	Parser/mcs/eval.cs \
	Parser/mcs/expression.cs \
	Parser/mcs/field.cs \
	Parser/mcs/flowanalysis.cs \
	Parser/mcs/generic.cs \
	Parser/mcs/import.cs \
	Parser/mcs/iterators.cs \
	Parser/mcs/lambda.cs \
	Parser/mcs/linq.cs \
	Parser/mcs/literal.cs \
	Parser/mcs/location.cs \
	Parser/mcs/membercache.cs \
	Parser/mcs/method.cs \
	Parser/mcs/modifiers.cs \
	Parser/mcs/module.cs \
	Parser/mcs/MonoSymbolFile.cs \
	Parser/mcs/MonoSymbolTable.cs \
	Parser/mcs/MonoSymbolWriter.cs \
	Parser/mcs/namespace.cs \
	Parser/mcs/nullable.cs \
	Parser/mcs/outline.cs \
	Parser/mcs/parameter.cs \
	Parser/mcs/pending.cs \
	Parser/mcs/property.cs \
	Parser/mcs/reflection.cs \
	Parser/mcs/report.cs \
	Parser/mcs/settings.cs \
	Parser/mcs/SourceMethodBuilder.cs \
	Parser/mcs/statement.cs \
	Parser/mcs/support.cs \
	Parser/mcs/symbolwriter.cs \
	Parser/mcs/typemanager.cs \
	Parser/mcs/typespec.cs \
	Parser/mcs/visit.cs \
	Properties/AssemblyInfo.cs \
	Refactoring/BaseRefactoringContext.cs \
	Refactoring/CodeAction.cs \
	Refactoring/CodeActions/AddAnotherAccessorAction.cs \
	Refactoring/CodeActions/CheckIfParameterIsNullAction.cs \
	Refactoring/CodeActions/ConvertDecToHexAction.cs \
	Refactoring/CodeActions/ConvertForeachToForAction.cs \
	Refactoring/CodeActions/ConvertHexToDecAction.cs \
	Refactoring/CodeActions/CreateBackingStoreAction.cs \
	Refactoring/CodeActions/CreateClassDeclarationAction.cs \
	Refactoring/CodeActions/CreateConstructorDeclarationAction.cs \
	Refactoring/CodeActions/CreateDelegateAction.cs \
	Refactoring/CodeActions/CreateEventInvocatorAction.cs \
	Refactoring/CodeActions/CreateFieldAction.cs \
	Refactoring/CodeActions/CreateIndexerAction.cs \
	Refactoring/CodeActions/CreateLocalVariableAction.cs \
	Refactoring/CodeActions/CreateMethodDeclarationAction.cs \
	Refactoring/CodeActions/CreatePropertyAction.cs \
	Refactoring/CodeActions/DeclareLocalVariableAction.cs \
	Refactoring/CodeActions/ExtractMethod/ExtractMethodAction.cs \
	Refactoring/CodeActions/ExtractMethod/StaticVisitor.cs \
	Refactoring/CodeActions/ExtractMethod/VariableLookupVisitor.cs \
	Refactoring/CodeActions/FlipOperatorArgumentsAction.cs \
	Refactoring/CodeActions/GenerateGetterAction.cs \
	Refactoring/CodeActions/GeneratePropertyAction.cs \
	Refactoring/CodeActions/GenerateSwitchLabelsAction.cs \
	Refactoring/CodeActions/InlineLocalVariableAction.cs \
	Refactoring/CodeActions/InsertAnonymousMethodSignatureAction.cs \
	Refactoring/CodeActions/IntroduceConstantAction.cs \
	Refactoring/CodeActions/IntroduceFormatItemAction.cs \
	Refactoring/CodeActions/InvertIfAction.cs \
	Refactoring/CodeActions/RemoveBackingStoreAction.cs \
	Refactoring/CodeActions/RemoveBracesAction.cs \
	Refactoring/CodeActions/RemoveRegionAction.cs \
	Refactoring/CodeActions/ReplaceEmptyStringAction.cs \
	Refactoring/CodeActions/SpecializedCodeAction.cs \
	Refactoring/CodeActions/SplitDeclarationAndAssignmentAction.cs \
	Refactoring/CodeActions/SplitStringAction.cs \
	Refactoring/CodeActions/UseExplicitTypeAction.cs \
	Refactoring/CodeActions/UseVarKeywordAction.cs \
	Refactoring/CodeIssue.cs \
	Refactoring/CodeIssues/ConditionalToNullCoalescingIssue.cs \
	Refactoring/CodeIssues/GatherVisitorBase.cs \
	Refactoring/CodeIssues/InconsistentNamingIssue/AffectedEntity.cs \
	Refactoring/CodeIssues/InconsistentNamingIssue/DefaultRules.cs \
	Refactoring/CodeIssues/InconsistentNamingIssue/InconsistentNamingIssue.cs \
	Refactoring/CodeIssues/InconsistentNamingIssue/NamingConventionService.cs \
	Refactoring/CodeIssues/InconsistentNamingIssue/NamingRule.cs \
	Refactoring/CodeIssues/InconsistentNamingIssue/NamingStyle.cs \
	Refactoring/CodeIssues/InconsistentNamingIssue/WordParser.cs \
	Refactoring/CodeIssues/IssueCategories.cs \
	Refactoring/CodeIssues/NotImplementedExceptionIssue.cs \
	Refactoring/CodeIssues/RedundantInternalIssue.cs \
	Refactoring/CodeIssues/RedundantNamespaceUsageIssue.cs \
	Refactoring/CodeIssues/RedundantPrivateIssue.cs \
	Refactoring/CodeIssues/RedundantThisIssue.cs \
	Refactoring/CodeIssues/RedundantUsingIssue.cs \
	Refactoring/CodeIssues/StringIsNullOrEmptyIssue.cs \
	Refactoring/CodeIssues/UseVarKeywordIssue.cs \
	Refactoring/ContextActionAttribute.cs \
	Refactoring/DocumentScript.cs \
	Refactoring/ICodeActionProvider.cs \
	Refactoring/ICodeIssueProvider.cs \
	Refactoring/IssueAttribute.cs \
	Refactoring/IssueMarker.cs \
	Refactoring/PatternHelper.cs \
	Refactoring/RefactoringAstHelper.cs \
	Refactoring/RefactoringContext.cs \
	Refactoring/Script.cs \
	Refactoring/Severity.cs \
	Refactoring/TypeSystemAstBuilder.cs \
	Resolver/CompositeResolveVisitorNavigator.cs \
	Resolver/CSharpAstResolver.cs \
	Resolver/CSharpConversions.cs \
	Resolver/CSharpInvocationResolveResult.cs \
	Resolver/CSharpOperators.cs \
	Resolver/CSharpResolver.cs \
	Resolver/DetectSkippableNodesNavigator.cs \
	Resolver/FindReferencedEntities.cs \
	Resolver/FindReferences.cs \
	Resolver/FindReferenceSearchScope.cs \
	Resolver/IResolveVisitorNavigator.cs \
	Resolver/LambdaResolveResult.cs \
	Resolver/Log.cs \
	Resolver/MemberLookup.cs \
	Resolver/MethodGroupResolveResult.cs \
	Resolver/NodeListResolveVisitorNavigator.cs \
	Resolver/OverloadResolution.cs \
	Resolver/OverloadResolutionErrors.cs \
	Resolver/ResolveAtLocation.cs \
	Resolver/ResolveVisitor.cs \
	Resolver/TypeInference.cs \
	SimpleNameLookupMode.cs \
	TypeSystem/AliasNamespaceReference.cs \
	TypeSystem/AttributeTypeReference.cs \
	TypeSystem/ConstantValues.cs \
	TypeSystem/CSharpAssembly.cs \
	TypeSystem/CSharpAttribute.cs \
	TypeSystem/CSharpDocumentationComment.cs \
	TypeSystem/CSharpParsedFile.cs \
	TypeSystem/CSharpTypeResolveContext.cs \
	TypeSystem/CSharpUnresolvedTypeDefinition.cs \
	TypeSystem/MemberTypeOrNamespaceReference.cs \
	TypeSystem/MethodTypeParameterWithInheritedConstraints.cs \
	TypeSystem/ResolvedUsingScope.cs \
	TypeSystem/SimpleTypeOrNamespaceReference.cs \
	TypeSystem/TypeOrNamespaceReference.cs \
	TypeSystem/TypeSystemConvertVisitor.cs \
	TypeSystem/UsingScope.cs

all: $(ASSEMBLY) $(ASSEMBLY).mdb

$(ASSEMBLY): $(build_sources)
	$(CSC) $(CSC_FLAGS) -keyfile:"$(SIGNING_KEY)" "-define:NET35;FULL_AST;BOOTSTRAP_BASIC" -debug -out:$@ -target:library $(REFS) $(build_sources)

$(ASSEMBLY).mdb: $(ASSEMBLY)

assemblydir = $(MD_ASSEMBLY_DIR)
assembly_DATA = $(ASSEMBLY) $(ASSEMBLY).mdb

CLEANFILES = $(ASSEMBLY) $(ASSEMBLY).mdb

EXTRA_DIST = $(FILES) $(SIGNING_KEY)

include $(top_srcdir)/Makefile.include
