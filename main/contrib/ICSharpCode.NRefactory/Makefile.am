	
ASSEMBLY = $(top_builddir)/build/bin/ICSharpCode.NRefactory.dll
  

REFS =  \
	-r:../../build/bin/Mono.Cecil.dll \
	-r:System \
	-r:System.Core \
	-r:System.Xml \
	-r:System.Xml.Linq
	
SIGNING_KEY=$(srcdir)/ICSharpCode.NRefactory.snk

FILES =  \
	CSharp/Analysis/ControlFlow.cs \
	CSharp/Analysis/DefiniteAssignmentAnalysis.cs \
	CSharp/Analysis/MinimalResolveContext.cs \
	CSharp/Ast/AstLocation.cs \
	CSharp/Ast/AstNode.cs \
	CSharp/Ast/AstNodeCollection.cs \
	CSharp/Ast/AstType.cs \
	CSharp/Ast/CompilationUnit.cs \
	CSharp/Ast/ComposedType.cs \
	CSharp/Ast/CSharpModifierToken.cs \
	CSharp/Ast/CSharpTokenNode.cs \
	CSharp/Ast/CSharpUtil.cs \
	CSharp/Ast/DepthFirstAstVisitor.cs \
	CSharp/Ast/ErrorNode.cs \
	CSharp/Ast/Expressions/AnonymousMethodExpression.cs \
	CSharp/Ast/Expressions/AnonymousTypeCreateExpression.cs \
	CSharp/Ast/Expressions/ArrayCreateExpression.cs \
	CSharp/Ast/Expressions/ArrayInitializerExpression.cs \
	CSharp/Ast/Expressions/AsExpression.cs \
	CSharp/Ast/Expressions/AssignmentExpression.cs \
	CSharp/Ast/Expressions/BaseReferenceExpression.cs \
	CSharp/Ast/Expressions/BinaryOperatorExpression.cs \
	CSharp/Ast/Expressions/CastExpression.cs \
	CSharp/Ast/Expressions/CheckedExpression.cs \
	CSharp/Ast/Expressions/ConditionalExpression.cs \
	CSharp/Ast/Expressions/DefaultValueExpression.cs \
	CSharp/Ast/Expressions/DirectionExpression.cs \
	CSharp/Ast/Expressions/EmptyExpression.cs \
	CSharp/Ast/Expressions/Expression.cs \
	CSharp/Ast/Expressions/IdentifierExpression.cs \
	CSharp/Ast/Expressions/IndexerExpression.cs \
	CSharp/Ast/Expressions/InvocationExpression.cs \
	CSharp/Ast/Expressions/IsExpression.cs \
	CSharp/Ast/Expressions/LambdaExpression.cs \
	CSharp/Ast/Expressions/MemberReferenceExpression.cs \
	CSharp/Ast/Expressions/NamedArgumentExpression.cs \
	CSharp/Ast/Expressions/NamedExpression.cs \
	CSharp/Ast/Expressions/NullReferenceExpression.cs \
	CSharp/Ast/Expressions/ObjectCreateExpression.cs \
	CSharp/Ast/Expressions/ParenthesizedExpression.cs \
	CSharp/Ast/Expressions/PointerReferenceExpression.cs \
	CSharp/Ast/Expressions/PrimitiveExpression.cs \
	CSharp/Ast/Expressions/QueryExpression.cs \
	CSharp/Ast/Expressions/SizeOfExpression.cs \
	CSharp/Ast/Expressions/StackAllocExpression.cs \
	CSharp/Ast/Expressions/ThisReferenceExpression.cs \
	CSharp/Ast/Expressions/TypeOfExpression.cs \
	CSharp/Ast/Expressions/TypeReferenceExpression.cs \
	CSharp/Ast/Expressions/UnaryOperatorExpression.cs \
	CSharp/Ast/Expressions/UncheckedExpression.cs \
	CSharp/Ast/Expressions/UndocumentedExpression.cs \
	CSharp/Ast/GeneralScope/Attribute.cs \
	CSharp/Ast/GeneralScope/AttributeSection.cs \
	CSharp/Ast/GeneralScope/Comment.cs \
	CSharp/Ast/GeneralScope/Constraint.cs \
	CSharp/Ast/GeneralScope/DelegateDeclaration.cs \
	CSharp/Ast/GeneralScope/ExternAliasDeclaration.cs \
	CSharp/Ast/GeneralScope/NamespaceDeclaration.cs \
	CSharp/Ast/GeneralScope/TypeDeclaration.cs \
	CSharp/Ast/GeneralScope/TypeParameterDeclaration.cs \
	CSharp/Ast/GeneralScope/UsingAliasDeclaration.cs \
	CSharp/Ast/GeneralScope/UsingDeclaration.cs \
	CSharp/Ast/IAstVisitor.cs \
	CSharp/Ast/Identifier.cs \
	CSharp/Ast/IRelocatable.cs \
	CSharp/Ast/MemberType.cs \
	CSharp/Ast/Modifiers.cs \
	CSharp/Ast/NodeType.cs \
	CSharp/Ast/ObservableAstVisitor.cs \
	CSharp/Ast/PrimitiveType.cs \
	CSharp/Ast/Role.cs \
	CSharp/Ast/SimpleType.cs \
	CSharp/Ast/Statements/BlockStatement.cs \
	CSharp/Ast/Statements/BreakStatement.cs \
	CSharp/Ast/Statements/CheckedStatement.cs \
	CSharp/Ast/Statements/ContinueStatement.cs \
	CSharp/Ast/Statements/DoWhileStatement.cs \
	CSharp/Ast/Statements/EmptyStatement.cs \
	CSharp/Ast/Statements/ExpressionStatement.cs \
	CSharp/Ast/Statements/FixedStatement.cs \
	CSharp/Ast/Statements/ForeachStatement.cs \
	CSharp/Ast/Statements/ForStatement.cs \
	CSharp/Ast/Statements/GotoStatement.cs \
	CSharp/Ast/Statements/IfElseStatement.cs \
	CSharp/Ast/Statements/LabelStatement.cs \
	CSharp/Ast/Statements/LockStatement.cs \
	CSharp/Ast/Statements/ReturnStatement.cs \
	CSharp/Ast/Statements/Statement.cs \
	CSharp/Ast/Statements/SwitchStatement.cs \
	CSharp/Ast/Statements/ThrowStatement.cs \
	CSharp/Ast/Statements/TryCatchStatement.cs \
	CSharp/Ast/Statements/UncheckedStatement.cs \
	CSharp/Ast/Statements/UnsafeStatement.cs \
	CSharp/Ast/Statements/UsingStatement.cs \
	CSharp/Ast/Statements/VariableDeclarationStatement.cs \
	CSharp/Ast/Statements/WhileStatement.cs \
	CSharp/Ast/Statements/YieldBreakStatement.cs \
	CSharp/Ast/Statements/YieldStatement.cs \
	CSharp/Ast/TypeMembers/Accessor.cs \
	CSharp/Ast/TypeMembers/AttributedNode.cs \
	CSharp/Ast/TypeMembers/ConstructorDeclaration.cs \
	CSharp/Ast/TypeMembers/DestructorDeclaration.cs \
	CSharp/Ast/TypeMembers/EnumMemberDeclaration.cs \
	CSharp/Ast/TypeMembers/EventDeclaration.cs \
	CSharp/Ast/TypeMembers/FieldDeclaration.cs \
	CSharp/Ast/TypeMembers/FixedFieldDeclaration.cs \
	CSharp/Ast/TypeMembers/FixedVariableInitializer.cs \
	CSharp/Ast/TypeMembers/IndexerDeclaration.cs \
	CSharp/Ast/TypeMembers/MemberDeclaration.cs \
	CSharp/Ast/TypeMembers/MethodDeclaration.cs \
	CSharp/Ast/TypeMembers/OperatorDeclaration.cs \
	CSharp/Ast/TypeMembers/ParameterDeclaration.cs \
	CSharp/Ast/TypeMembers/PropertyDeclaration.cs \
	CSharp/Ast/TypeMembers/VariableInitializer.cs \
	CSharp/Formatter/AstFormattingVisitor.cs \
	CSharp/Formatter/CSharpFormattingOptions.cs \
	CSharp/Formatter/Indent.cs \
	CSharp/Formatter/ITextEditorAdapter.cs \
	CSharp/OutputVisitor/InsertParenthesesVisitor.cs \
	CSharp/OutputVisitor/IOutputFormatter.cs \
	CSharp/OutputVisitor/OutputVisitor.cs \
	CSharp/OutputVisitor/TextWriterOutputFormatter.cs \
	CSharp/Parser/CSharpParser.cs \
	CSharp/Parser/mcs/anonymous.cs \
	CSharp/Parser/mcs/argument.cs \
	CSharp/Parser/mcs/assembly.cs \
	CSharp/Parser/mcs/assign.cs \
	CSharp/Parser/mcs/async.cs \
	CSharp/Parser/mcs/attribute.cs \
	CSharp/Parser/mcs/cfold.cs \
	CSharp/Parser/mcs/class.cs \
	CSharp/Parser/mcs/codegen.cs \
	CSharp/Parser/mcs/complete.cs \
	CSharp/Parser/mcs/const.cs \
	CSharp/Parser/mcs/constant.cs \
	CSharp/Parser/mcs/context.cs \
	CSharp/Parser/mcs/convert.cs \
	CSharp/Parser/mcs/CryptoConvert.cs \
	CSharp/Parser/mcs/cs-parser.cs \
	CSharp/Parser/mcs/cs-tokenizer.cs \
	CSharp/Parser/mcs/decl.cs \
	CSharp/Parser/mcs/delegate.cs \
	CSharp/Parser/mcs/doc.cs \
	CSharp/Parser/mcs/driver.cs \
	CSharp/Parser/mcs/dynamic.cs \
	CSharp/Parser/mcs/ecore.cs \
	CSharp/Parser/mcs/enum.cs \
	CSharp/Parser/mcs/eval.cs \
	CSharp/Parser/mcs/expression.cs \
	CSharp/Parser/mcs/field.cs \
	CSharp/Parser/mcs/flowanalysis.cs \
	CSharp/Parser/mcs/generic.cs \
	CSharp/Parser/mcs/import.cs \
	CSharp/Parser/mcs/iterators.cs \
	CSharp/Parser/mcs/lambda.cs \
	CSharp/Parser/mcs/linq.cs \
	CSharp/Parser/mcs/literal.cs \
	CSharp/Parser/mcs/location.cs \
	CSharp/Parser/mcs/membercache.cs \
	CSharp/Parser/mcs/method.cs \
	CSharp/Parser/mcs/modifiers.cs \
	CSharp/Parser/mcs/MonoSymbolFile.cs \
	CSharp/Parser/mcs/MonoSymbolTable.cs \
	CSharp/Parser/mcs/MonoSymbolWriter.cs \
	CSharp/Parser/mcs/namespace.cs \
	CSharp/Parser/mcs/nullable.cs \
	CSharp/Parser/mcs/outline.cs \
	CSharp/Parser/mcs/parameter.cs \
	CSharp/Parser/mcs/pending.cs \
	CSharp/Parser/mcs/property.cs \
	CSharp/Parser/mcs/reflection.cs \
	CSharp/Parser/mcs/report.cs \
	CSharp/Parser/mcs/rootcontext.cs \
	CSharp/Parser/mcs/roottypes.cs \
	CSharp/Parser/mcs/statement.cs \
	CSharp/Parser/mcs/support.cs \
	CSharp/Parser/mcs/symbolwriter.cs \
	CSharp/Parser/mcs/typemanager.cs \
	CSharp/Parser/mcs/typespec.cs \
	CSharp/Parser/mcs/visit.cs \
	CSharp/Parser/ParsedFile.cs \
	CSharp/Parser/TypeSystemConvertVisitor.cs \
	CSharp/Refactoring/Action.cs \
	CSharp/Refactoring/ContextAction/AddAnotherAccessor.cs \
	CSharp/Refactoring/ContextAction/CheckIfParameterIsNull.cs \
	CSharp/Refactoring/ContextAction/ConvertDecToHex.cs \
	CSharp/Refactoring/ContextAction/ConvertForeachToFor.cs \
	CSharp/Refactoring/ContextAction/ConvertHexToDec.cs \
	CSharp/Refactoring/ContextAction/CreateBackingStore.cs \
	CSharp/Refactoring/ContextAction/CreateEventInvocator.cs \
	CSharp/Refactoring/ContextAction/CreateField.cs \
	CSharp/Refactoring/ContextAction/CreateLocalVariable.cs \
	CSharp/Refactoring/ContextAction/CreateProperty.cs \
	CSharp/Refactoring/ContextAction/FlipOperatorArguments.cs \
	CSharp/Refactoring/ContextAction/GenerateGetter.cs \
	CSharp/Refactoring/ContextAction/GenerateSwitchLabels.cs \
	CSharp/Refactoring/ContextAction/InsertAnonymousMethodSignature.cs \
	CSharp/Refactoring/ContextAction/IntroduceFormatItem.cs \
	CSharp/Refactoring/ContextAction/InvertIf.cs \
	CSharp/Refactoring/ContextAction/RemoveBackingStore.cs \
	CSharp/Refactoring/ContextAction/RemoveBraces.cs \
	CSharp/Refactoring/ContextAction/ReplaceEmptyString.cs \
	CSharp/Refactoring/ContextAction/SplitDeclarationAndAssignment.cs \
	CSharp/Refactoring/ContextAction/SplitString.cs \
	CSharp/Refactoring/ContextAction/UseExplicitType.cs \
	CSharp/Refactoring/ContextAction/UseVarKeyword.cs \
	CSharp/Refactoring/CreateLinkAction.cs \
	CSharp/Refactoring/FormatTextAction.cs \
	CSharp/Refactoring/IActionFactory.cs \
	CSharp/Refactoring/IContextAction.cs \
	CSharp/Refactoring/NodeOutputAction.cs \
	CSharp/Refactoring/NodeSelectionAction.cs \
	CSharp/Refactoring/RefactoringContext.cs \
	CSharp/Refactoring/Script.cs \
	CSharp/Refactoring/TextReplaceAction.cs \
	CSharp/Refactoring/TypeSystemAstBuilder.cs \
	CSharp/Resolver/AliasNamespaceReference.cs \
	CSharp/Resolver/AmbiguousResolveResult.cs \
	CSharp/Resolver/ByReferenceResolveResult.cs \
	CSharp/Resolver/ConstantResolveResult.cs \
	CSharp/Resolver/ConstantValues.cs \
	CSharp/Resolver/ConversionResolveResult.cs \
	CSharp/Resolver/Conversions.cs \
	CSharp/Resolver/CSharpAttribute.cs \
	CSharp/Resolver/CSharpResolver.cs \
	CSharp/Resolver/DetectSkippableNodesNavigator.cs \
	CSharp/Resolver/ErrorResolveResult.cs \
	CSharp/Resolver/InvocationResolveResult.cs \
	CSharp/Resolver/IResolveVisitorNavigator.cs \
	CSharp/Resolver/ITypeOrNamespaceReference.cs \
	CSharp/Resolver/LambdaResolveResult.cs \
	CSharp/Resolver/LocalResolveResult.cs \
	CSharp/Resolver/Log.cs \
	CSharp/Resolver/MapTypeIntoNewContext.cs \
	CSharp/Resolver/MemberLookup.cs \
	CSharp/Resolver/MemberResolveResult.cs \
	CSharp/Resolver/MemberTypeOrNamespaceReference.cs \
	CSharp/Resolver/MethodGroupResolveResult.cs \
	CSharp/Resolver/NamespaceResolveResult.cs \
	CSharp/Resolver/NodeListResolveVisitorNavigator.cs \
	CSharp/Resolver/OperatorResolveResult.cs \
	CSharp/Resolver/OverloadResolution.cs \
	CSharp/Resolver/OverloadResolutionErrors.cs \
	CSharp/Resolver/ResolveResult.cs \
	CSharp/Resolver/ResolveVisitor.cs \
	CSharp/Resolver/SimpleNameLookupMode.cs \
	CSharp/Resolver/SimpleTypeOrNamespaceReference.cs \
	CSharp/Resolver/TypeInference.cs \
	CSharp/Resolver/TypeResolveResult.cs \
	CSharp/Resolver/UnknownMemberResolveResult.cs \
	CSharp/Resolver/UsingScope.cs \
	Documentation/IDStringProvider.cs \
	Documentation/XmlDocumentationProvider.cs \
	PatternMatching/AnyNode.cs \
	PatternMatching/Backreference.cs \
	PatternMatching/BacktrackingInfo.cs \
	PatternMatching/Choice.cs \
	PatternMatching/INode.cs \
	PatternMatching/IPatternAstVisitor.cs \
	PatternMatching/Match.cs \
	PatternMatching/NamedNode.cs \
	PatternMatching/OptionalNode.cs \
	PatternMatching/Pattern.cs \
	PatternMatching/Repeat.cs \
	Properties/AssemblyInfo.cs \
	TypeSystem/Accessibility.cs \
	TypeSystem/ArrayType.cs \
	TypeSystem/ByReferenceType.cs \
	TypeSystem/CecilLoader.cs \
	TypeSystem/DomRegion.cs \
	TypeSystem/EntityType.cs \
	TypeSystem/Error.cs \
	TypeSystem/ExtensionMethods.cs \
	TypeSystem/IAccessor.cs \
	TypeSystem/IAnnotatable.cs \
	TypeSystem/IAttribute.cs \
	TypeSystem/IConstantValue.cs \
	TypeSystem/IDocumentationProvider.cs \
	TypeSystem/IEntity.cs \
	TypeSystem/IEvent.cs \
	TypeSystem/IExplicitInterfaceImplementation.cs \
	TypeSystem/IField.cs \
	TypeSystem/IFreezable.cs \
	TypeSystem/IInterningProvider.cs \
	TypeSystem/IMember.cs \
	TypeSystem/IMethod.cs \
	TypeSystem/Implementation/AbstractFreezable.cs \
	TypeSystem/Implementation/AbstractMember.cs \
	TypeSystem/Implementation/AbstractType.cs \
	TypeSystem/Implementation/BaseTypeCollector.cs \
	TypeSystem/Implementation/CompositeTypeResolveContext.cs \
	TypeSystem/Implementation/CompoundTypeDefinition.cs \
	TypeSystem/Implementation/DefaultAccessor.cs \
	TypeSystem/Implementation/DefaultAttribute.cs \
	TypeSystem/Implementation/DefaultEvent.cs \
	TypeSystem/Implementation/DefaultExplicitInterfaceImplementation.cs \
	TypeSystem/Implementation/DefaultField.cs \
	TypeSystem/Implementation/DefaultMethod.cs \
	TypeSystem/Implementation/DefaultParameter.cs \
	TypeSystem/Implementation/DefaultProperty.cs \
	TypeSystem/Implementation/DefaultTypeDefinition.cs \
	TypeSystem/Implementation/DefaultTypeParameter.cs \
	TypeSystem/Implementation/GetClassTypeReference.cs \
	TypeSystem/Implementation/GetMembersHelper.cs \
	TypeSystem/Implementation/NestedTypeReference.cs \
	TypeSystem/Implementation/ProxyTypeResolveContext.cs \
	TypeSystem/Implementation/SimpleConstantValue.cs \
	TypeSystem/Implementation/SimpleInterningProvider.cs \
	TypeSystem/Implementation/SimpleProjectContent.cs \
	TypeSystem/Implementation/SpecializedEvent.cs \
	TypeSystem/Implementation/SpecializedField.cs \
	TypeSystem/Implementation/SpecializedMember.cs \
	TypeSystem/Implementation/SpecializedMethod.cs \
	TypeSystem/Implementation/SpecializedProperty.cs \
	TypeSystem/Implementation/SubstitutionTypeReference.cs \
	TypeSystem/Implementation/TypeParameterSubstitution.cs \
	TypeSystem/Implementation/TypeStorage.cs \
	TypeSystem/Implementation/TypeWithElementType.cs \
	TypeSystem/Implementation/VoidTypeDefinition.cs \
	TypeSystem/INamedElement.cs \
	TypeSystem/IntersectionType.cs \
	TypeSystem/IParameter.cs \
	TypeSystem/IParameterizedMember.cs \
	TypeSystem/IParsedFile.cs \
	TypeSystem/IProjectContent.cs \
	TypeSystem/IProperty.cs \
	TypeSystem/ISupportsInterning.cs \
	TypeSystem/ISynchronizedTypeResolveContext.cs \
	TypeSystem/IType.cs \
	TypeSystem/ITypeDefinition.cs \
	TypeSystem/ITypeParameter.cs \
	TypeSystem/ITypeReference.cs \
	TypeSystem/ITypeResolveContext.cs \
	TypeSystem/IVariable.cs \
	TypeSystem/KnownTypeReference.cs \
	TypeSystem/NullableType.cs \
	TypeSystem/ParameterizedType.cs \
	TypeSystem/ParameterListComparer.cs \
	TypeSystem/PointerType.cs \
	TypeSystem/ReflectionHelper.cs \
	TypeSystem/ReflectionNameParseException.cs \
	TypeSystem/SharedTypes.cs \
	TypeSystem/TypeKind.cs \
	TypeSystem/TypeVisitor.cs \
	Utils/BitVector16.cs \
	Utils/BusyManager.cs \
	Utils/CacheManager.cs \
	Utils/CSharpPrimitiveCast.cs \
	Utils/DotNet35Compat.cs \
	Utils/EmptyList.cs \
	Utils/ExtensionMethods.cs \
	Utils/GraphVizGraph.cs \
	Utils/Platform.cs \
	Utils/TreeTraversal.cs 

all: $(ASSEMBLY) $(ASSEMBLY).mdb

$(ASSEMBLY): $(build_sources)
	$(CSC) $(CSC_FLAGS) -keyfile:"$(SIGNING_KEY)" "-define:NET35;FULL_AST;BOOTSTRAP_BASIC" -debug -out:$@ -target:library $(REFS) $(build_sources)

$(ASSEMBLY).mdb: $(ASSEMBLY)

assemblydir = $(MD_ASSEMBLY_DIR)
assembly_DATA = $(ASSEMBLY) $(ASSEMBLY).mdb

CLEANFILES = $(ASSEMBLY) $(ASSEMBLY).mdb

EXTRA_DIST = $(FILES) $(SIGNING_KEY)

include $(top_srcdir)/Makefile.include
