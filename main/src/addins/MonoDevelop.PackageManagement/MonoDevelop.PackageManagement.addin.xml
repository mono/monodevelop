<ExtensionModel>

	<Runtime>
		<Import assembly="MonoDevelop.PackageManagement.dll" />
		<Import assembly="Microsoft.Web.XmlTransform.dll" />
		<Import assembly="NuGet.Core.dll" />
		<Import file="NuGet.exe" />
	</Runtime>

	<Extension path = "/MonoDevelop/Ide/Commands">
		<Command
			id = "MonoDevelop.PackageManagement.Commands.AddPackages"
			_description = "Add packages to the project"
			_label = "Add _Packages..."
			defaultHandler = "MonoDevelop.PackageManagement.Commands.AddPackagesHandler" />
		<Command
			id = "MonoDevelop.PackageManagement.Commands.RestorePackages"
			_description = "Restore missing packages"
			_label = "_Restore Packages"
			defaultHandler = "MonoDevelop.PackageManagement.Commands.RestorePackagesHandler" />
		<Command
			id="MonoDevelop.PackageManagement.Commands.Restore"
			_description="Restore missing packages"
			_label="_Restore"
			defaultHandler="MonoDevelop.PackageManagement.Commands.RestorePackagesHandler" />
		<Command
			id="MonoDevelop.PackageManagement.Commands.PackageReferenceNodeCommands.ShowPackageVersion"
			_description="Current package version"
			_label="Version" />
		<Command
			id="MonoDevelop.PackageManagement.Commands.PackageReferenceNodeCommands.ReinstallPackage"
			_description="Retarget package"
			_label="Re_target" />
		<Command
			id="MonoDevelop.PackageManagement.Commands.PackageReferenceNodeCommands.UpdatePackage"
			_description="Update package"
			_label="_Update" />
		<Command
			id="MonoDevelop.PackageManagement.Commands.UpdateAllPackagesInProject"
			_description="Update all packages"
			_label="_Update"
			defaultHandler="MonoDevelop.PackageManagement.Commands.UpdateAllPackagesInProjectHandler" />
		<Command
			id="MonoDevelop.PackageManagement.Commands.UpdateAllPackagesInSolution"
			_description="Update all packages in the solution"
			_label="_Update Packages"
			defaultHandler="MonoDevelop.PackageManagement.Commands.UpdateAllPackagesInSolutionHandler" />
		<Command
			id="MonoDevelop.PackageManagement.Commands.ReinstallAllPackagesInProject"
			_description="Retargets all packages"
			_label="Re_target"
			defaultHandler="MonoDevelop.PackageManagement.Commands.ReinstallAllPackagesInProjectHandler" />
	</Extension>
	
	<Extension path="/MonoDevelop/Ide/MainMenu/Project">
		<CommandItem
			id="MonoDevelop.PackageManagement.Commands.AddPackages"
			insertafter="MonoDevelop.Ide.Commands.ProjectCommands.AddReference"
			insertbefore="ExportSeparator" />
		<CommandItem
			id = "MonoDevelop.PackageManagement.Commands.UpdateAllPackagesInSolution"
			insertafter="MonoDevelop.PackageManagement.Commands.AddPackages"
			insertbefore="ExportSeparator" />
		<CommandItem
			id = "MonoDevelop.PackageManagement.Commands.RestorePackages"
			insertafter="MonoDevelop.PackageManagement.Commands.UpdateAllPackagesInSolution"
			insertbefore="ExportSeparator" />
	</Extension>
	
	<Extension path="/MonoDevelop/Ide/ContextMenu/ProjectPad">
		<Condition id="ItemType" value="Solution">
			<CommandItem
				id="MonoDevelop.PackageManagement.Commands.UpdateAllPackagesInSolution"
				insertafter="MonoDevelop.PackageManagement.Commands.AddReference"
				insertbefore="AddSectionEnd" />
			<CommandItem
				id="MonoDevelop.PackageManagement.Commands.RestorePackages"
				insertafter="MonoDevelop.PackageManagement.Commands.UpdateAllPackagesInSolution"
				insertbefore="AddSectionEnd" />
		</Condition>
		<Condition id="ItemType" value="MonoDevelop.PackageManagement.NodeBuilders.ProjectPackagesFolderNode">
			<CommandItem
				id="MonoDevelop.PackageManagement.Commands.AddPackages" />
			<CommandItem
				id="MonoDevelop.PackageManagement.Commands.ReinstallAllPackagesInProject" />
			<CommandItem
				id="MonoDevelop.PackageManagement.Commands.UpdateAllPackagesInProject" />
			<CommandItem
				id="MonoDevelop.PackageManagement.Commands.Restore" />
		</Condition>
	</Extension>

	<Extension path="/MonoDevelop/Ide/ContextMenu/ProjectPad/Add">
		<Condition id="ItemType" value="Project">
			<CommandItem
				id="MonoDevelop.PackageManagement.Commands.AddPackages"
				insertafter="MonoDevelop.Ide.Commands.ProjectCommands.AddFiles"
				insertbefore="MonoDevelop.WebReferences.WebReferenceCommands.Add" />
		</Condition>
	</Extension>
	
	<Extension path="/MonoDevelop/Core/StockIcons">
		<StockIcon stockid="md-nuget-package" resource="reference-light-48.png" />
		<StockIcon stockid="md-nuget-package-source" resource="package-source-light-32.png" size="Dnd" />
		<StockIcon stockid="md-prefs-package" resource="prefs-package-light-16.png" size="Menu" />
		<StockIcon stockid="md-prefs-package-source" resource="prefs-package-source-light-16.png" size="Menu" />
	</Extension>
	
	<Extension path="/MonoDevelop/Ide/GlobalOptionsDialog">
		<Section id="NuGetPackageManagement" _label="Packages">
			<Section id="General" _label="General" fill="true" class="MonoDevelop.PackageManagement.Gui.PackageManagementOptionsPanel" icon="md-prefs-package" />
			<Section id="PackageSources" _label="Sources" fill="true" class="MonoDevelop.PackageManagement.Gui.PackageSourcesOptionsPanel" icon="md-prefs-package-source" />
		</Section>
	</Extension>

	<Extension path="/MonoDevelop/Ide/ProjectTemplatePackageInstallers">
		<Class id="NuGet" class="MonoDevelop.PackageManagement.ProjectTemplateNuGetPackageInstaller" />
	</Extension>

	<Extension path="/MonoDevelop/Ide/Pads/ProjectPad">
		<NodeBuilder class="MonoDevelop.PackageManagement.NodeBuilders.ProjectPackagesProjectNodeBuilderExtension" />
		<NodeBuilder class="MonoDevelop.PackageManagement.NodeBuilders.ProjectPackagesFolderNodeBuilder" />
		<NodeBuilder class="MonoDevelop.PackageManagement.NodeBuilders.PackageReferenceNodeBuilder" />
		<NodeBuilder class="MonoDevelop.PackageManagement.NodeBuilders.ProjectReferenceNodeBuilderExtension" />
		<NodeBuilder class="MonoDevelop.PackageManagement.NodeBuilders.ProjectReferencesNodeBuilderExtension" />
		<NodeBuilder class="MonoDevelop.PackageManagement.NodeBuilders.ProjectReferencesFromPackagesFolderNodeBuilder" />
	</Extension>

	<ExtensionPoint path = "/MonoDevelop/PackageManagement/ContextMenu/ProjectPad/PackageReference">
		<ExtensionNodeSet id="MonoDevelop.Components.Commands.ItemSet"/>
	</ExtensionPoint>

	<Extension path="/MonoDevelop/PackageManagement/ContextMenu/ProjectPad/PackageReference">
		<CommandItem id="MonoDevelop.PackageManagement.Commands.PackageReferenceNodeCommands.ShowPackageVersion" />
		<CommandItem id="MonoDevelop.PackageManagement.Commands.PackageReferenceNodeCommands.ReinstallPackage" />
		<CommandItem id="MonoDevelop.PackageManagement.Commands.PackageReferenceNodeCommands.UpdatePackage" />
		<CommandItem id="MonoDevelop.Ide.Commands.EditCommands.Delete" />
	</Extension>

	<Extension path="/MonoDevelop/DesignerSupport/PropertyProviders">
		<Class class="MonoDevelop.PackageManagement.NodeBuilders.PackageReferenceNodePropertyProvider" />
	</Extension>

	<Extension path="/MonoDevelop/Ide/StartupHandlers">
		<Class class="MonoDevelop.PackageManagement.Commands.PackageRestoreStartupHandler" />
	</Extension>

	<Extension path="/MonoDevelop/Ide/SearchCategories">
		<Class class="MonoDevelop.PackageManagement.SearchPackagesSearchCategory" />
	</Extension>
</ExtensionModel>
