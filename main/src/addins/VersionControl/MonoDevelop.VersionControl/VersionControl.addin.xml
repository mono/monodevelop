<Addin id        = "VersionControl"
       namespace   = "MonoDevelop"
       name      = "Version Control Support"
       author    = "Joshua Tauberer"
       copyright = "GPL"
       url       = "http://taubz.for.net/code/diff"
       description = "A MonoDevelop addin for using version control systems like Subversion"
       category    = "Version Control"
       flags = "Hidden"
       version   = "2.1.0">
 
	<Runtime>
		<Import assembly="Diff.dll"/>
		<Import assembly="DiffWidget.dll"/>
	</Runtime>

	<Dependencies>
	    <Addin id="Core" version="2.1.0"/>
	    <Addin id="Core.Gui" version="2.1.0"/>
	    <Addin id="Projects" version="2.1.0"/>
	    <Addin id="Projects.Gui" version="2.1.0"/>
	    <Addin id="Ide" version="2.1.0"/>
	    <Addin id="SourceEditor2" version="2.1.0"/>
	</Dependencies>
	
	<ExtensionPoint path = "/MonoDevelop/VersionControl/VersionControlSystems" name = "Version control systems">
		<Description>Version control systems</Description>
		<ExtensionNode name="Class">
			<Description>The specified class must subclass VersionControlSystem.</Description>
		</ExtensionNode>	
	</ExtensionPoint>

	<ExtensionPoint path = "/MonoDevelop/VersionControl/CommitDialogExtensions" name = "Commit dialog extensions">
		<Description>Commit dialog extensions.</Description>
		<ExtensionNode name="Class">
			<Description>The specified class must subclass CommitDialogExtension.</Description>
		</ExtensionNode>	
	</ExtensionPoint>

	<ExtensionPoint path = "/MonoDevelop/VersionControl/StatusViewCommands" name = "Status View Commands">
		<Description>Commands to be shown in the context menu of the status view. The id must match an existing code. The provided type must be a subclass of VersionControlCommandHandler.</Description>
		<ExtensionNode name="CommandItem" />
		<ExtensionNode name="SeparatorItem" type="MonoDevelop.Components.Commands.ExtensionNodes.SeparatorItemCodon" />
	</ExtensionPoint>
	
	<Extension path = "/MonoDevelop/Core/FileSystemExtensions">
		<Class class = "MonoDevelop.VersionControl.VersionControlFileSystemExtension" />
	</Extension>

	<Extension path = "/MonoDevelop/Ide/Pads/ProjectPad">
		<PadOption id = "ShowVersionControlOverlays" _label = "Show version control overlay icons" defaultValue = "True" />
		<NodeBuilder id = "VersionControlNodeExtension" class = "MonoDevelop.VersionControl.VersionControlNodeExtension"/>
	</Extension>

	<Extension path = "/MonoDevelop/Core/StockIcons">
		<StockIcon stockid = "vc-add" resource = "overlay_added.png" />
		<StockIcon stockid = "vc-remove" resource = "overlay_removed.png" />
		<StockIcon stockid = "vc-add-command" resource = "menu_add.png" />
		<StockIcon stockid = "vc-remove-command" resource = "menu_remove.png" />
		<StockIcon stockid = "vc-resolve-command" resource = "menu_resolve.png" />
		<StockIcon stockid = "vc-revert-command" resource = "menu_revert.png" />
		<StockIcon stockid = "vc-diff" resource = "menu_diff.png" />
		<StockIcon stockid = "vc-log" resource = "menu_log.png" />
		<StockIcon stockid = "vc-status" resource = "menu_status.png" />
		<StockIcon stockid = "vc-update" resource = "menu_update.png" />
		<StockIcon stockid = "vc-commit" resource = "menu_commit.png" />
		<StockIcon stockid = "vc-remote-status" resource = "menu_remote_status.png" />
		<StockIcon stockid = "vc-comment" resource = "comment.png" />
	</Extension>
    
	<Extension path = "/MonoDevelop/Ide/Commands">
		<Category _name = "Version Control" id = "VersionControl">
		<Command id = "MonoDevelop.VersionControl.Commands.Add" 
			_label = "_Add"
			icon = "vc-add-command"
			description = "Add node to repository in the next commit."/>
		<Command id = "MonoDevelop.VersionControl.Commands.Remove" 
			_label = "_Remove"
			icon = "vc-remove-command"
			description = "Remove node to repository in the next commit."/>
		<Command id = "MonoDevelop.VersionControl.Commands.Commit" 
			_label = "_Commit"
			icon = "vc-commit"
			description = "Commits a file or directory into the repository."/>
		<Command id = "MonoDevelop.VersionControl.Commands.Diff" 
			_label = "_Diff"
			icon = "vc-diff"
			description = "Show the changes made to the local copy since the last update."/>
		<Command id = "MonoDevelop.VersionControl.Commands.Revert" 
			_label = "_Revert"
			icon = "vc-revert-command"
			description = "Restore pristine working copy file (undo most local edits)."/>
		<Command id = "MonoDevelop.VersionControl.Commands.Log" 
			_label = "_Log"
			icon = "vc-log"
			description = "Shows the commit history of the file or folder."/>
		<Command id = "MonoDevelop.VersionControl.Commands.Status" 
			_label = "_Review Changes"
			icon = "vc-status"
			description = "Shows the status of files in the folder."/>
		<Command id = "MonoDevelop.VersionControl.Commands.Update" 
			_label = "_Update"
			icon = "vc-update"
			description = "Updates the local copy with remote changes."/>
		<Command id = "MonoDevelop.VersionControl.Commands.Publish" 
			_label = "_Publish..."
			description = "Publish actual project into repository."/>
		<Command id = "MonoDevelop.VersionControl.Commands.Checkout" 
			defaultHandler = "MonoDevelop.VersionControl.CheckoutCommand"
			_label = "C_heckout..."
			icon = "vc-update"
			description = "Checkout a project from repository."/>
		<Command id = "MonoDevelop.VersionControl.Commands.Lock" 
			_label = "Lock"
			description = "Lock files in the repository, so that no other user can change them."/>
		<Command id = "MonoDevelop.VersionControl.Commands.Unlock" 
			_label = "Release Lock"
			description = "Unlock files in the repository, so that other user can change them."/>
		<Command id = "MonoDevelop.VersionControl.Commands.Annotate" 
			_label = "Show Annotations"
			description = "Show the origin of each line in a file."/>
		<Command id = "MonoDevelop.VersionControl.Commands.ShowAnnotations" 
			defaultHandler = "MonoDevelop.VersionControl.ShowAnnotationsCommand" 
			_label = "Show Annotations"
			description = "Show the origin of each line in a file."/>
		<Command id = "MonoDevelop.VersionControl.Commands.HideAnnotations" 
			defaultHandler = "MonoDevelop.VersionControl.HideAnnotationsCommand" 
			_label = "Hide Annotations"
			description = "Hide Annotations."/>
		<Command id = "MonoDevelop.VersionControl.Commands.CreatePatch" 
			_label = "Create _Patch"
			icon = "vc-diff"
			description = "Create a patch representing local changes."/>
		</Category>
	</Extension>
	
	<Extension path="/MonoDevelop/Ide/MainMenu/File">
		<SeparatorItem id = "CheckoutSep" insertafter="MonoDevelop.Ide.Commands.FileCommands.OpenFile" />
		<CommandItem id="MonoDevelop.VersionControl.Commands.Checkout" />
	</Extension>	

	<Extension path = "/MonoDevelop/Ide/ContextMenu/ProjectPad">
		<Condition id="ItemType" value="IFileItem|IFolderItem">
			<ItemSet id = "VersionControl" _label = "_Version Control" insertafter = "Tools">
				<Condition id="ItemType" value="Project|WorkspaceItem">
					<CommandItem id = "MonoDevelop.VersionControl.Commands.Publish"/>
				</Condition>
				<CommandItem id = "MonoDevelop.VersionControl.Commands.Add"/>
				<CommandItem id = "MonoDevelop.VersionControl.Commands.Remove"/>
				<CommandItem id = "MonoDevelop.VersionControl.Commands.Revert"/>
				<Condition id="ItemType" value="IFileItem">
					<CommandItem id = "MonoDevelop.VersionControl.Commands.Lock"/>
					<CommandItem id = "MonoDevelop.VersionControl.Commands.Unlock"/>
					<CommandItem id = "MonoDevelop.VersionControl.Commands.Annotate"/>
				</Condition>
				<SeparatorItem id = "CommandSeparator" />
				<CommandItem id = "MonoDevelop.VersionControl.Commands.Update"/>
				<Condition id="ItemType" value="IFolderItem">
					<CommandItem id = "MonoDevelop.VersionControl.Commands.Status"/>
					<CommandItem id = "MonoDevelop.VersionControl.Commands.Commit"/>
				</Condition>
				<CommandItem id = "MonoDevelop.VersionControl.Commands.Diff"/>
				<CommandItem id = "MonoDevelop.VersionControl.Commands.CreatePatch"/>
				<CommandItem id = "MonoDevelop.VersionControl.Commands.Log"/>
			</ItemSet>
			<SeparatorItem />
		</Condition>
	</Extension>
	<Extension path = "/MonoDevelop/VersionControl/StatusViewCommands">
		<CommandItem id = "MonoDevelop.Ide.Commands.ViewCommands.Open" type="MonoDevelop.VersionControl.OpenCommandHandler"/>
		<SeparatorItem id = "CommandSeparator0" />
		<CommandItem id = "MonoDevelop.VersionControl.Commands.Update" type="MonoDevelop.VersionControl.AddinCommandHandler"/>
		<CommandItem id = "MonoDevelop.VersionControl.Commands.Diff" type="MonoDevelop.VersionControl.AddinCommandHandler"/>
		<CommandItem id = "MonoDevelop.VersionControl.Commands.Log" type="MonoDevelop.VersionControl.AddinCommandHandler"/>
		<SeparatorItem id = "CommandSeparator1" />
		<CommandItem id = "MonoDevelop.VersionControl.Commands.Remove" type="MonoDevelop.VersionControl.AddinCommandHandler"/>
		<CommandItem id = "MonoDevelop.VersionControl.Commands.Revert" type="MonoDevelop.VersionControl.AddinCommandHandler"/>
		<SeparatorItem id = "CommandSeparator2" />
		<CommandItem id = "MonoDevelop.VersionControl.Commands.Lock" type="MonoDevelop.VersionControl.AddinCommandHandler"/>
		<CommandItem id = "MonoDevelop.VersionControl.Commands.Unlock" type="MonoDevelop.VersionControl.AddinCommandHandler"/>
		<SeparatorItem id = "CommandSeparator3" />
	</Extension>
	
	<Extension path="/MonoDevelop/SourceEditor2/ContextMenu/Editor"> 
		<CommandItem id = "MonoDevelop.VersionControl.Commands.ShowAnnotations"/>
		<CommandItem id = "MonoDevelop.VersionControl.Commands.HideAnnotations"/>
	</Extension>	
	
	<Extension path = "/MonoDevelop/ProjectModel/Gui/ItemOptionPanels">
		<Section id="VersionControl" _label="Version Control">
			<ComplexCondition>
				<Or>
					<Condition id="ItemType" value="SolutionItem" />
					<Condition id="ItemType" value="Solution" />
				</Or>
				<Section id = "VersionControlGeneral" _label = "Commit Message Style" fill="true" class="MonoDevelop.VersionControl.VersionControlPolicyPanel" />
			</ComplexCondition>
		</Section>
	</Extension>
	
	<Extension path = "/MonoDevelop/ProjectModel/Gui/DefaultPolicyPanels">
		<Section id="VersionControl" _label="Version Control">
			<Section id = "VersionControlGeneral" _label = "Commit Message Style" fill="true" class="MonoDevelop.VersionControl.VersionControlPolicyPanel" />
		</Section>
	</Extension>
	
	<Extension path = "/MonoDevelop/ProjectModel/PolicyTypes" >
		<PolicyType id="VersionControlPolicy" class="MonoDevelop.VersionControl.VersionControlPolicy" />
	</Extension>
	
	<Extension path = "/MonoDevelop/ProjectModel/PolicySets/Mono" >
		<Policies resource="Policies.xml"/>
	</Extension>
</Addin>
	
